<app-abbegate-header></app-abbegate-header>
<div class="container">
  <form class="form-container" [formGroup]="supplierForm">
    <h3 style="text-align: center">Edit Supplier Form</h3>

    <div>
      <p-fieldset legend="Supplier Details">
        <div class="supplier-container">
          <div class="form-group" formGroupName="supplierInfo">
            <p-floatLabel>
              <input
                id="name"
                type="text"
                pInputText
                formControlName="supplierName"
              />
              <label for="name">Name</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="supplierInfo">
            <p-floatLabel>
              <input
                id="email"
                type="email"
                pInputText
                formControlName="supplierEmail"
              />
              <label for="email">Email</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="supplierInfo">
            <p-floatLabel>
              <input
                id="address"
                type="text"
                pInputText
                formControlName="address"
              />
              <label for="address">Address</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="supplierInfo">
            <p-floatLabel>
              <input
                id="code"
                type="text"
                pInputText
                formControlName="zipCode"
              />
              <label for="code">Zip Code</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="supplierInfo">
            <p-floatLabel>
              <input
                id="phone"
                type="text"
                pInputText
                maxlength="10"
                formControlName="supplierPhoneNumber"
              />
              <label for="phone">Phone number</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="supplierInfo">
            <p-floatLabel>
              <input
                id="addInfo"
                type="text"
                pInputText
                formControlName="additionalInfo"
              />
              <label for="addInfo">Additional Info</label>
            </p-floatLabel>
          </div>

          <div formGroupName="supplierInfo">
            <p-checkbox
              inputId="sc"
              formControlName="subContractor"
              binary="true"
            />
            <label for="sc"> This supplier is a Subcontractor</label>
          </div>
        </div>
      </p-fieldset>
    </div>

    <div class="top">
      <p-fieldset legend="Contact Details">
        <div class="contact-container" formArrayName="contactInfo">
          <div
            class="contact-item"
            *ngFor="let contact of contactInfo.controls; let i = index"
            [formGroupName]="i"
          >
            <div class="form-group">
              <p-floatLabel>
                <input
                  id="name"
                  type="text"
                  pInputText
                  formControlName="contactName"
                />
                <label for="name">Name</label>
              </p-floatLabel>
            </div>

            <div class="form-group">
              <p-floatLabel>
                <input
                  id="email"
                  type="email"
                  pInputText
                  formControlName="contactEmail"
                />
                <label for="email">Email</label>
              </p-floatLabel>
            </div>

            <div class="form-group">
              <p-floatLabel>
                <input
                  id="phone"
                  type="text"
                  pInputText
                  maxlength="10"
                  formControlName="contactPhoneNumber"
                />
                <label for="phone">Phone number</label>
              </p-floatLabel>
            </div>

            <div class="action-buttons">
              <button
                *ngIf="contactInfo.length > 0"
                type="button"
                class="p-button-danger"
                pButton
                pRipple
                icon="pi pi-minus-circle"
                (click)="removeContact(i)"
              ></button>
              <button
                *ngIf="contactInfo.length === 1 || i === contactInfo.length - 1"
                type="button"
                class="p-button-success"
                pButton
                pRipple
                icon="pi pi-plus-circle"
                (click)="addContact()"
              ></button>
            </div>
          </div>
        </div>
      </p-fieldset>

      <div class="update-cancel top">
        <p-toast></p-toast>
        <button
          pButton
          pRipple
          label="Update"
          class="p-button-success"
          (click)="updateConfirmSupplier($event)"
        ></button>
        <button
          pButton
          pRipple
          label="Cancel"
          class="p-button-danger"
          (click)="closeUpdate()"
        ></button>
      </div>
    </div>
  </form>
</div>
<p-confirmDialog />
