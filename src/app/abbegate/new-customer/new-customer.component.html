<app-abbegate-header></app-abbegate-header>
<div>
  <form [formGroup]="customerForm">
    <h3 style="text-align: center">New Customer Form</h3>

    <div>
      <p-fieldset legend="Company Details">
        <div class="company-container">
          <!-- Personal Info form - name, email, phone -->
          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input
                id="name"
                type="text"
                pInputText
                formControlName="companyName"
              />
              <label for="name">Name</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input
                id="email"
                type="email"
                pInputText
                formControlName="companyEmail"
              />
              <label for="email">Email</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input
                id="phone"
                type="text"
                pInputText
                formControlName="companyPhoneNumber"
              />
              <label for="phone">Phone number</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input
                id="address"
                type="text"
                pInputText
                formControlName="address"
              />
              <label for="address">Address</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input id="city" type="text" pInputText formControlName="city" />
              <label for="city">City</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input
                id="country"
                type="text"
                pInputText
                formControlName="country"
              />
              <label for="country">Country</label>
            </p-floatLabel>
          </div>

          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input
                id="code"
                type="text"
                pInputText
                formControlName="zipCode"
              />
              <label for="code">Zip Code</label>
            </p-floatLabel>
          </div>

          <!-- group -->
          <div class="form-group" formGroupName="companyInfo">
            <p-dropdown
              [options]="groups"
              optionLabel="name"
              placeholder="Select a Group"
              formControlName="group"
            ></p-dropdown>
          </div>

          <div class="form-group" formGroupName="companyInfo">
            <p-floatLabel>
              <input
                id="sales_rep"
                type="text"
                pInputText
                formControlName="sales"
              />
              <label for="sales_rep">Sales Rep</label>
            </p-floatLabel>
          </div>

          <!-- status -->
          <div class="form-group" formGroupName="companyInfo">
            <p-dropdown
              [options]="status"
              optionLabel="name"
              placeholder="Select a Status"
              formControlName="status"
            ></p-dropdown>
          </div>
        </div>
      </p-fieldset>
    </div>

    <div class="top">
      <p-fieldset legend="Contact Details">
        <div formArrayName="contactInfo">
          <div
            *ngFor="let contact of contactInfo?.controls; let i = index"
            [formGroupName]="i"
            class="contact-item"
          >
            <div class="form-group">
              <p-floatLabel>
                <input
                  id="name"
                  type="text"
                  pInputText
                  formControlName="contactName"
                />
                <label for="name">Name</label>
              </p-floatLabel>
            </div>

            <div class="form-group">
              <p-floatLabel>
                <input
                  id="email"
                  type="email"
                  pInputText
                  formControlName="contactEmail"
                />
                <label for="email">Email</label>
              </p-floatLabel>
            </div>

            <div class="form-group">
              <p-floatLabel>
                <input
                  id="phone"
                  type="text"
                  pInputText
                  formControlName="contactPhoneNumber"
                />
                <label for="phone">Phone number</label>
              </p-floatLabel>
            </div>

            <div class="form-group category">
              <p-multiSelect
                placeholder="Select a Category"
                [options]="category"
                optionLabel="name"
                formControlName="category"
              ></p-multiSelect>
            </div>

            <div class="action-buttons">
              <button
                *ngIf="contactInfo.controls.length > 1"
                type="button"
                class="p-button-danger"
                pButton
                pRipple
                icon="pi pi-minus-circle"
                (click)="removeContactInfo(i)"
              ></button>
              <button
                *ngIf="i === contactInfo.controls.length - 1"
                type="button"
                class="p-button-success"
                pButton
                pRipple
                icon="pi pi-plus-circle"
                (click)="addContactInfo()"
              ></button>
            </div>
          </div>
        </div>
      </p-fieldset>

      <div class="action-buttons top">
        <button
          pButton
          pRipple
          label="Save"
          class="p-button-success"
          (click)="saveCustomerDetails()"
        ></button>
        <button
          pButton
          pRipple
          label="Cancel"
          class="p-button-danger"
          (click)="clearCustomerForm()"
        ></button>
      </div>
    </div>
  </form>
  <p-toast></p-toast>
</div>
